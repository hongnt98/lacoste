export const browser={isIE:window.navigator.userAgent.indexOf("MSIE ")>-1||window.navigator.userAgent.indexOf("Trident/")>-1};const e=window.crypto||window.msCrypto;function t(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^e.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}function n(){const e={objDataset:{datasets:new Map},action:new Map};let t=null;if(browser.isIE){const n="crmzd";window[n]||(window[n]=e),t=window[n]}else t=e;return t}const o=n(),r=new DOMParser;export function getTypedDataset(e){let t=Object.assign({},e.dataset);for(let n in t)switch(t[n]){case"null":t[n]=null;break;case"true":t[n]=!0;break;case"false":t[n]=!1;break;default:if(isNaN(t[n])){if(-1!==["[","{"].indexOf(t[n].charAt(0)))try{t[n]=JSON.parse(t[n])}catch(e){}}else t[n]=Number(t[n])}return t};export function objDataset(e,n,r=null){if(null===r){const t=e.dataset[n];return o.objDataset.datasets.get(t)}const c=t();o.objDataset.datasets.set(c,r),e.dataset[n]=c};export function delegate(e,t,n,o){function r(e){if(e.target.matches(t))o(e);else{const o=e.currentTarget&&e.currentTarget.matches(t)&&e.currentTarget||e.target.closest(t);o&&(!o.lastDispatch||o.lastDispatch+10<+new Date)&&(o.lastDispatch=+new Date,function(e,t){const o=new CustomEvent(n,{detail:"redispatch"});o.preventDefault=(()=>e.preventDefault()),o.stopPropagation=(()=>e.stopPropagation()),t.dispatchEvent(o)}(e,o))}}function c(e){const o=e.querySelectorAll(t);for(let t=0,c=o.length;t<c;t++)o[t].addEventListener(n,r)}e&&(c(e),new MutationObserver(e=>e.forEach(e=>{"childList"===e.type&&[...e.addedNodes].forEach(e=>{e instanceof HTMLElement&&(e.matches(t)?e.addEventListener(n,r):c(e))})})).observe(e,{childList:!0,subtree:!0}))};export function getCookie(e){const t=new RegExp(e+"=[^;]+","i");return document.cookie.match(t)?document.cookie.match(t)[0].split("=")[1]:null};export function setCookie(e,t,n){const o=new Date,r=new Date;r.setTime(o.getTime()+24*n*60*60*1e3),document.cookie=e+"="+encodeURIComponent(t)+";expires="+r.toGMTString()+";path=/"};export function templateWrite(e,t){let n=document.querySelector(`template#${e}`);n||((n=document.createElement("template")).id=e),n.innerHTML="",n.appendChild(t)};export function templateRead(e){const t=`template#${e}`,n=document.querySelector(t);if(!n)throw new Error(`No match for ${t}`);return document.importNode(n.content,!0)};export function template(e){return{read:()=>templateRead(e),write:t=>templateWrite(e,t)}};function c(e,t){if(e&&t){let o=[];for(var n in t)o.push(`${n}=${t[n]}`);e+=`${-1!==e.indexOf("?")?"&":"?"}${o.join("&")}`}return e}export async function fetchAsync(e,t={}){t.credentials="include";const n=await fetch(e,t);if(200===n.status)return n;throw new Error(`${e}: ${n.status} ${n.status}`)};export async function fetchJson(e,t={}){return e=c(e,{format:"json"}),await fetchAsync(e,t).then(e=>e.json())};export function forceRepaintSVG(e){const t=e.querySelectorAll("svg");e=document.adoptNode(e);for(let n=0,o=t.length;n<o;n++)t[n].outerHTML=t[n].outerHTML};export async function fetchHtml(e,t={}){e=c(e,{ajax:!0});const n=await fetchAsync(e,t).then(e=>e.text());let o=r.parseFromString(n,"text/html").querySelector("body");return o&&forceRepaintSVG(o),o};export function buildQuery(e,t){var n="",o=[];return e&&Object.keys(e).forEach(t=>{t&&e[t]&&o.push(t+"="+e[t])}),o.length>0&&(n=o.join("&")),t&&(n=encodeURI(n)),n};export function domRemoveChildren(e){if(e)for(;e.lastChild;)e.removeChild(e.lastChild)};export function domReplaceWith(e,t){const n=t.parentNode;return e&&n.replaceChild(e,t),e};export function domReplaceContent(e,t){if(e&&t){const n=[...e.children];domRemoveChildren(t),n.forEach(e=>t.appendChild(e))}};export const lockScroll=(()=>{let e=0;return{lock(){e=window.scrollY,document.documentElement.classList.add("lock-scroll")},lockAfterTransition(e){const t=()=>{lockScroll.lock(),e.removeEventListener("transitionend",t)};e.addEventListener("transitionend",t)},unlock(){document.documentElement.classList.remove("lock-scroll"),window.scroll(0,Number(e))}}})();export function replaceAll(e,t){var n=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(n,function(e){return t[e.toLowerCase()]})};export function throttled(e,t){let n=0;return function(...o){const r=(new Date).getTime();if(!(r-n<e))return n=r,t(...o)}};export function debounced(e,t){let n;return function(...o){n&&clearTimeout(n),n=setTimeout(()=>{t(...o),n=null},e)}};export function getScrollbarWidth(){const e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const t=e.offsetWidth;e.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",e.appendChild(n);const o=n.offsetWidth;return e.parentNode.removeChild(e),t-o};export function isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)};export function mergeDeep(e,...t){if(!t.length)return e;const n=t.shift();if(isObject(e)&&isObject(n))for(const o in n)isObject(n[o])?(e[o]||Object.assign(e,{[o]:{}}),mergeDeep(e[o],n[o])):Object.assign(e,{[o]:n[o]});return mergeDeep(e,...t)};export function kebabToCamelCase(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};